<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Website Kelas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
  <style>
#clock {
    font-size: 34px;
    background-image: url('background.png');
    color: white;
    padding: 10px 20px;
    border-radius: 12px;
    display: block;
    margin: -10px auto;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
  	
  .social-icons a {
    font-size: 2.8rem;
    margin: 0 10px;
    color: #555;
    display: inline-block;
    transition: transform 0.3s ease;
  }
  .social-icons a:hover {
    transform: scale(1.3);
  }

  .social-icons a.instagram:hover {
    background: linear-gradient(45deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5);
    background-size: 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: igGradient 3s ease infinite;
  }
  @keyframes igGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .social-icons a.tiktok:hover {
    color: #000;
    text-shadow: 
      -2px 0 cyan,
      2px 0 red;
  }

  .social-icons a.youtube:hover {
    color: #FF0000;
    text-shadow: 0 0 8px rgba(255, 0, 0, 0.6);
  }

  .social-icons a.email:hover {
    color: #1a73e8;
    text-shadow: 0 0 8px rgba(26, 115, 232, 0.6);
  }
  	
    :root{--accent:#0d6efd;--bg:#f6f7fb;--card:#ffffff}
    *{box-sizing:border-box}
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg,#eef2ff 0%, #f8fafc 100%);
      color:#212529;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
/* ====== NAVBAR MODERN ====== */
.navbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(0,0,0,0.6);
    padding: 10px 20px;
    color: white;
    backdrop-filter: blur(8px);
    border-radius: 0 0 10px 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    animation: fadeDown 0.8s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
@keyframes slideIn {
    from { transform: translateY(-10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
@keyframes fadeUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
@keyframes fadeDown {
    from { transform: translateY(-20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.navbar-brand {
  font-weight: 800;
  letter-spacing: 1.2px;
  font-size: 1.5rem;
  background: linear-gradient(90deg, #4facfe, #00f2fe);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin:0 auto;
  text-shadow: none;
  transition: transform 0.3s ease;
}

.navbar-brand:hover {
  transform: scale(1.05);
}

/* Tombol toggle sidebar */
.sidebar-toggle {
  position: fixed;
  left: 12px;
  top: 14px;
  z-index: 1060;
  background: linear-gradient(90deg, #4facfe, #00f2fe);
  border: none;
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  transition: background 0.3s ease;
}
.sidebar-toggle:hover {
  background: linear-gradient(90deg, #00f2fe, #4facfe);
}

/* ====== SIDEBAR MODERN ====== */
.sidebar {
  background: linear-gradient(180deg, #1a1b3c 0%, #12122b 100%);
  color: #fff;
  min-height: 100vh;
  padding-top: 1rem;
  transition: transform 0.36s cubic-bezier(.22,.9,.3,1), box-shadow 0.2s;
  box-shadow: 4px 0 20px rgba(0,0,0,0.3);
}

.sidebar h4 {
  font-weight: 700;
  font-size: 1.2rem;
  margin-bottom: 1rem;
}

.sidebar a {
  color: rgba(255,255,255,0.85);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  border-radius: 8px;
  margin: 6px 10px;
  transition: all 0.25s ease;
  font-weight: 500;
}

.sidebar a i {
  font-size: 1rem;
  transition: transform 0.25s ease;
}

.sidebar a:hover {
  background: rgba(255,255,255,0.08);
  transform: translateX(5px);
}

.sidebar a:hover i {
  transform: scale(1.2);
}

/* Mobile Sidebar */
@media (max-width:767px){
  .sidebar {
    position: fixed;
    z-index: 1040;
    width: 230px;
    left: 0;
    top: 0;
    height: 100vh;
    transform: translateX(-110%);
  }
  .sidebar.active {
    transform: translateX(0);
  }
  .backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    z-index: 1035;
    opacity: 0;
    pointer-events: none;
    transition: opacity .25s;
  }
  .backdrop.show {
    opacity: 1;
    pointer-events: auto;
  }
}

/* CONTENT CARDS */
.card-soft{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 8px 30px rgba(16,24,40,0.06);border:1px solid rgba(13,110,253,0.04)}
.section-title {
display:flex;
align-items:center;
justify-content:space-between;
margin-top:16px;
margin-bottom:16px
}

.card-soft:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  transition: all 0.2s ease;
}

/* buttons */
.btn-primary{background:var(--accent);border:none;box-shadow:0 8px 20px rgba(13,110,253,0.08);transition:transform .12s,box-shadow .12s}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 12px 30px rgba(13,110,253,0.12)}

/* list */
.list-group-item{border-radius:8px;border:0;padding:10px 14px;margin-bottom:8px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}

/* table modern */
.table thead th{border-bottom:0;background:rgba(13,110,253,0.06)}
.table tbody tr{transition:transform .18s,box-shadow .18s}
.table tbody tr:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(16,24,40,0.06)}

/* animations */
@keyframes fadeInUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
.fade-in{animation:fadeInUp .45s ease both}

/* small helpers */
.muted{color:#6c757d}
.img-fluid{max-height:300px;object-fit:cover;border-radius:10px}

  </style>
</head>
<body>
  <nav class="navbar sticky-top">
    <div class="container-fluid position-relative">
      <button class="sidebar-toggle d-md-none" onclick="toggleSidebar()">☰</button>
      <span class="navbar-brand">DKV &amp; Broadcasting</span>
    </div>
  </nav>  
<div class="backdrop" id="backdrop" onclick="closeSidebar()">	
</div>  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-3 col-lg-2 d-md-block sidebar" id="sidebar">
        <h4 class="text-white px-3 mb-3">Menu</h4>
        <a href="#home"><i class="fas fa-home me-2"></i>Home</a>
        <a href="#kelompok"><i class="fas fa-users me-2"></i>Buat Kelompok</a>
        <a href="#keuangan"><i class="fas fa-wallet me-2"></i>Kas Kelas</a>
        <a href="#about"><i class="fas fa-info-circle me-2"></i>Contact</a>
        <a href="#login"><i class="fas fa-sign-in-alt me-2"></i>Login</a>
      </nav><main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
    <section id="home" class="fade-in">
    	<div id="clock"></div>	
      <div class="section-title">
        <h2 class="mb-0">Anggota Kelas</h2>
        <div class="muted">Jumlah anggota: <span id="jumlah-anggota">0</span></div>
      </div>

      <div class="row g-3">
        <div class="col-md-6">
          <div class="card-soft">
            <h5 class="text-primary">Desain Komunikasi Visual</h5>
            <ul class="list-group mt-3" id="anggota-dkv"></ul>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card-soft">
            <h5 class="text-success">Broadcasting</h5>
            <ul class="list-group mt-3" id="anggota-bc"></ul>
          </div>
        </div>
      </div>

      <div class="mt-4 card-soft">
        <img src="foto_kelas.jpg" class="img-fluid shadow-sm" alt="Foto Kelas" />
      </div>
    </section>

    <section id="kelompok" class="d-none">
      <div class="section-title">
        <h2 class="mb-0">Pembentukan Kelompok</h2>
        <div class="muted">Opsi</div>
      </div>
      <div class="row g-2 fade-in">
        <div class="col-md-4">
          <div class="card-soft">
            <div class="form-check">
              <input type="checkbox" id="jurusan-dkv" value="dkv" class="form-check-input filter-jurusan">
              <label for="jurusan-dkv" class="form-check-label">DKV</label>
            </div>
            <div class="form-check mt-2">
              <input type="checkbox" id="jurusan-broadcasting" value="broadcasting" class="form-check-input filter-jurusan">
              <label for="jurusan-broadcasting" class="form-check-label">Broadcasting</label>
            </div>
            <div class="form-check mt-2">
              <input type="checkbox" id="wajib-perempuan" class="form-check-input">
              <label for="wajib-perempuan" class="form-check-label">Minimal 1 perempuan</label>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card-soft">
            <label for="jumlah-kelompok" class="form-label">Jumlah kelompok:</label>
            <input type="number" id="jumlah-kelompok" min="1" value="2" class="form-control">
          </div>
        </div>
        <div class="col-md-4 d-flex align-items-end">
          <button class="btn btn-primary w-100" onclick="bentukKelompok()">Bentuk Kelompok</button>
          <button class="btn btn-secondary mt-3" onclick="exportKelompok()">Export Kelompok</button>
        </div>
      </div>

      <div id="hasil-kelompok" class="mt-4"></div>
    </section>

    <section id="keuangan" class="d-none">
      <div class="section-title">
        <h2 class="mb-0">Kas Kelas</h2>
        <div>
          <span id="saldo-info" class="fw-bold me-3"></span>
          <button class="btn btn-outline-danger btn-sm" onclick="resetKeuangan()">🔁 Reset Kas & Pengeluaran</button>
        </div>
      </div>

      <div class="card-soft mb-3 fade-in">
        <div class="table-responsive">
          <table class="table table-borderless">
            <thead>
              <tr>
                <th>Nama</th>
                <th>Juli</th><th>Agustus</th><th>September</th><th>Oktober</th><th>November</th><th>Desember</th>
                <th>Januari</th><th>Februari</th><th>Maret</th><th>April</th><th>Mei</th><th>Juni</th>
              </tr>
            </thead>
            <tbody id="tabel-keuangan"></tbody>
          </table>
        </div>
      </div>

      <div class="card-soft">
        <h5>Catat Pengeluaran</h5>
        <div class="input-group mb-2">
          <input type="text" id="alasan-pengeluaran" class="form-control" placeholder="Alasan pengeluaran">
          <input type="number" id="jumlah-pengeluaran" class="form-control" placeholder="Jumlah (Rp)">
          <button class="btn btn-danger" onclick="catatPengeluaran()">Tambah</button>
        </div>
        <ul id="daftar-pengeluaran" class="list-group"></ul>
      </div>
    </section>

<section id="about" class="d-none">
  <div class="card-soft fade-in">
    <h5 class="mt-3">Social Media</h5>
    <div class="social-icons mt-2">
    	<p>
      <a href="https://www.instagram.com/xi.u.dkvbroadcast?igsh=ZmN4ejk3OWg1bWt6" target="_blank" rel="noopener noreferrer" aria-label="Instagram" title="Instagram" class="instagram">
        <i class="fab fa-instagram"></i>
        @dkvbcu27
      </a>
      </p>      
      <p>
      <a href="https://youtube.com/@broadcastinglm?si=LFXus9v9IakMgVvm" target="_blank" rel="noopener noreferrer" aria-label="YouTube" title="YouTube" class="youtube">
        <i class="fab fa-youtube"></i>
        @BroadcastingLM
      </a>
      </p>      
    </div>
  </div>
</section>

    <section id="login" class="d-none">
      <div class="card-soft fade-in">
        <h2>Login</h2>
        <div class="form-group mb-2">
          <label>Username</label>
          <input type="text" id="user" class="form-control">
        </div>
        <div class="form-group mb-2">
          <label>Password</label>
          <input type="password" id="pass" class="form-control">
        </div>
        <button class="btn btn-success mt-2" onclick="loginAdmin()">Login</button>
        <p id="login-msg" class="mt-2"></p>
      </div>
  <div id="admin-panel" class="d-none">      
  <div class="card-soft fade-in">
    <h2>Admin Panel</h2>
    <p class="muted">Buat akun baru dan atur role pengguna</p>
    <div class="form-group mb-2">
      <label>Username Baru</label>
      <input type="text" id="new-user" class="form-control">
    </div>
    <div class="form-group mb-2">
      <label>Password Baru</label>
      <input type="password" id="new-pass" class="form-control">
    </div>
    <div class="form-group mb-3">
      <label>Role</label>
      <select id="new-role" class="form-control">
        <option value="guru">Guru</option>
        <option value="bendahara">Bendahara</option>
        <option value="sekretaris">Sekretaris</option>
        <option value="admin">Admin</option>
      </select>
    </div>
    <button class="btn btn-primary" onclick="buatAkun()">Buat Akun</button>
    <p id="buat-akun-msg" class="mt-2"></p>
  </div>      
  </div>        
    </section>

  </main>
</div>

  </div>  <script>
    const backdrop = document.getElementById('backdrop');
    function toggleSidebar(){
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
      backdrop.classList.toggle('show');
    }
    function closeSidebar(){
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.remove('active');
      backdrop.classList.remove('show');
    }

    function resetKeuangan() {
      if (currentRole !== "admin") {
        alert("Hanya admin yang dapat mereset kas dan pengeluaran.");
        return;
      }
      if (confirm("Yakin ingin mereset semua data kas dan pengeluaran?")) {
        anggota.forEach(a => {
          kas[a.nama] = { saldo: 0, bulanan: Array(12).fill(false) };
        });
        pengeluaran = [];
        localStorage.setItem("kas", JSON.stringify(kas));
        localStorage.setItem("pengeluaran", JSON.stringify(pengeluaran));
        tampilkanKeuangan();
      }
    }

function buatAkun() {
  if (currentRole !== "admin") {
    document.getElementById("buat-akun-msg").textContent = "Hanya admin yang bisa membuat akun.";
    return;
  }
  const userBaru = document.getElementById("new-user").value.trim();
  const passBaru = document.getElementById("new-pass").value.trim();
  const roleBaru = document.getElementById("new-role").value;

  if (!userBaru || !passBaru) {
    document.getElementById("buat-akun-msg").textContent = "Username dan password wajib diisi.";
    return;
  }
  if (akun[userBaru]) {
    document.getElementById("buat-akun-msg").textContent = "Username sudah ada.";
    return;
  }

  akun[userBaru] = { password: passBaru, role: roleBaru };
  localStorage.setItem("akun", JSON.stringify(akun));
  document.getElementById("buat-akun-msg").textContent = `Akun '${userBaru}' berhasil dibuat dengan role '${roleBaru}'.`;
  
  document.getElementById("new-user").value = "";
  document.getElementById("new-pass").value = "";
}
    
let akun = JSON.parse(localStorage.getItem("akun")) || {
  admin: { password: "adminpass", role: "admin" },
  guru: { password: "gurupass", role: "guru" },
  bendahara: { password: "kaspass", role: "bendahara" },
  sekretaris: { password: "sekretaris123", role: "sekretaris" }
};

    const bulan = ["Juli", "Agustus", "September", "Oktober", "November", "Desember", "Januari", "Februari", "Maret", "April", "Mei", "Juni"];

    const defaultAnggota = [
      { nama: "Asyra Putri Maulidina", jeniskelamin: "perempuan", jurusan: "dkv" },    
      { nama: "Ameera", jeniskelamin: "perempuan", jurusan: "dkv" },     
      { nama: "Annisa", jeniskelamin: "perempuan", jurusan: "dkv" },        
      { nama: "Bilqis", jeniskelamin: "perempuan", jurusan: "dkv" },              
      { nama: "Dian Loryhana", jeniskelamin: "perempuan", jurusan: "dkv" },    
      { nama: "Dealexa", jeniskelamin: "perempuan", jurusan: "dkv" },   
      { nama: "Ferdinand Alexander Cahyadi", jeniskelamin: "lakilaki", jurusan: "dkv" },
       { nama: "Faheem", jeniskelamin: "lakilaki", jurusan: "dkv" },    
       { nama: "Frederick Eliezer Mangkin", jeniskelamin: "lakilaki", jurusan: "dkv" },     
      { nama: "M Nurdiansyah", jeniskelamin: "lakilaki", jurusan: "dkv" },         
      { nama: "M Nurardiansyah", jeniskelamin: "lakilaki", jurusan: "dkv" },   
      { nama: "M Akmal", jeniskelamin: "lakilaki", jurusan: "dkv" },        
      { nama: "M Abdan", jeniskelamin: "lakilaki", jurusan: "dkv" },               
      { nama: "M Sesar Supriaji", jeniskelamin: "lakilaki", jurusan: "dkv" },  
      { nama: "M Maulidan", jeniskelamin: "lakilaki", jurusan: "dkv" },     
      { nama: "Putraku Ridho", jeniskelamin: "lakilaki", jurusan: "dkv" },  
      { nama: "Iqbal", jeniskelamin: "lakilaki", jurusan: "dkv" },        
      { nama: "Hendrawan", jeniskelamin: "lakilaki", jurusan: "dkv" },    
      { nama: "Revano", jeniskelamin: "lakilaki", jurusan: "dkv" },  
      { nama: "Ramdhani", jeniskelamin: "lakilaki", jurusan: "dkv" },        
      { nama: "Revaliano", jeniskelamin: "lakilaki", jurusan: "dkv" },        
      { nama: "Raditya Putra Ardhani", jeniskelamin: "lakilaki", jurusan: "dkv" },            
      { nama: "Praditya Putra Irwanto", jeniskelamin: "lakilaki", jurusan: "dkv" },                  
      { nama: "Mutiara Haiqa Tuada", jeniskelamin: "perempuan", jurusan: "dkv" },   
      { nama: "Quaresma Abdul Pato", jeniskelamin: "lakilaki", jurusan: "dkv" },         
      { nama: "Riska Nopita Sari", jeniskelamin: "perempuan", jurusan: "dkv" },    
      { nama: "Rizqia", jeniskelamin: "perempuan", jurusan: "dkv" },         
      { nama: "Wijaya Nur Rachman", jeniskelamin: "lakilaki", jurusan: "dkv" },
      { nama: "Yardan Alvin", jeniskelamin: "lakilaki", jurusan: "dkv" },      
      { nama: "Alfian Bintang", jeniskelamin: "lakilaki", jurusan: "broadcasting" },
      { nama: "Arif Salfius", jeniskelamin: "lakilaki", jurusan: "broadcasting" },                 
      { nama: "Aisyah", jeniskelamin: "perempuan", jurusan: "broadcasting" },      
      { nama: "Dahan", jeniskelamin: "lakilaki", jurusan: "broadcasting" },
      { nama: "Daffa Eza", jeniskelamin: "lakilaki", jurusan: "broadcasting" },
      { nama: "Rafa Chiko", jeniskelamin: "lakilaki", jurusan: "broadcasting" },      
      { nama: "Fachri Arham", jeniskelamin: "lakilaki", jurusan: "broadcasting" },
      { nama: "Asrof", jeniskelamin: "lakilaki", jurusan: "broadcasting" },            
      { nama: "Moreno", jeniskelamin: "lakilaki", jurusan: "broadcasting" },                  
      { nama: "Pasha", jeniskelamin: "lakilaki", jurusan: "broadcasting" }
    ];

    let anggota = JSON.parse(localStorage.getItem("anggota")) || defaultAnggota;
    let kas = JSON.parse(localStorage.getItem("kas")) || {};
    let pengeluaran = JSON.parse(localStorage.getItem("pengeluaran")) || [];
    let kelompokTerbentuk = [];

    anggota.forEach(a => {
      if (!kas[a.nama]) kas[a.nama] = { saldo: 0, bulanan: Array(12).fill(false) };
    });
    localStorage.setItem("kas", JSON.stringify(kas));
    localStorage.setItem("anggota", JSON.stringify(anggota));

    let currentRole = null;

function tampilkanAnggota() {
  const listDKV = document.getElementById("anggota-dkv");
  const listBC = document.getElementById("anggota-bc");
  listDKV.innerHTML = "";
  listBC.innerHTML = "";

  anggota.sort((a, b) => a.nama.localeCompare(b.nama, "id", { sensitivity: "base" }));

  anggota.forEach(a => {
    const li = document.createElement("li");
    li.className = "list-group-item";
    li.textContent = a.nama;
    if (a.jurusan === "dkv") listDKV.appendChild(li);
    else if (a.jurusan === "broadcasting") listBC.appendChild(li);
  });

  document.getElementById('jumlah-anggota').textContent = anggota.length;
}

    function tampilkanKeuangan() {
      const tbody = document.getElementById("tabel-keuangan");
      tbody.innerHTML = "";
      let totalSaldo = 0;
      anggota.forEach(a => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${a.nama}</td>` + kas[a.nama].bulanan.map((b, i) => {
          const td = `<td class="${(currentRole === "admin" || currentRole === "bendahara") ? 'editable' : ''}" data-nama="${a.nama}" data-bulan="${i}">${b ? '✔️' : '❌'}</td>`;
          return td;
        }).join("");
        tbody.appendChild(row);
        totalSaldo += kas[a.nama].bulanan.filter(x => x).length * 10000;
      });

      const totalPengeluaran = pengeluaran.reduce((sum, p) => sum + p.jumlah, 0);
      document.getElementById("saldo-info").textContent = `Total Saldo: Rp ${(totalSaldo - totalPengeluaran).toLocaleString()} (Pemasukan: Rp ${totalSaldo.toLocaleString()}, Pengeluaran: Rp ${totalPengeluaran.toLocaleString()})`;

      const daftar = document.getElementById("daftar-pengeluaran");
      if(daftar){
        daftar.innerHTML = "";
        pengeluaran.forEach(p => {
          const li = document.createElement("li");
          li.className = "list-group-item";
          li.textContent = `${p.alasan} - Rp ${p.jumlah.toLocaleString()}`;
          daftar.appendChild(li);
        });
      }

      if (currentRole === "admin" || currentRole === "bendahara") {
        document.querySelectorAll(".editable").forEach(td => {
          td.addEventListener("click", () => {
            const nama = td.dataset.nama;
            const bulanIdx = parseInt(td.dataset.bulan);
            kas[nama].bulanan[bulanIdx] = !kas[nama].bulanan[bulanIdx];
            localStorage.setItem("kas", JSON.stringify(kas));
            tampilkanKeuangan();
          });
        });
      }
    }

    function catatPengeluaran() {
      if (currentRole !== "admin" && currentRole !== "bendahara") return;
      const alasan = document.getElementById("alasan-pengeluaran").value;
      const jumlah = parseInt(document.getElementById("jumlah-pengeluaran").value);
      if (!alasan || !jumlah || jumlah <= 0) return;
      pengeluaran.push({ alasan, jumlah });
      localStorage.setItem("pengeluaran", JSON.stringify(pengeluaran));
      tampilkanKeuangan();
    }

function bentukKelompok() {
  const jurusanDipilih = Array.from(document.querySelectorAll(".filter-jurusan:checked")).map(cb => cb.value);
  const wajibPerempuan = document.getElementById("wajib-perempuan").checked;
  const jumlahKelompok = parseInt(document.getElementById("jumlah-kelompok").value);
  const out = document.getElementById("hasil-kelompok");

  let kandidat = anggota.filter(a => jurusanDipilih.includes(a.jurusan));
  if (kandidat.length < jumlahKelompok) {
    out.innerHTML = `<div class="alert alert-warning">Jumlah anggota tidak cukup untuk ${jumlahKelompok} kelompok.</div>`;
    return;
  }

  let kelompok = [];
  let percobaan = 0;
  const maksPercobaan = 5000;
  let berhasil = false;

  while (percobaan < maksPercobaan) {
    kelompok = Array.from({ length: jumlahKelompok }, () => []);
    let acak = [...kandidat].sort(() => Math.random() - 0.5);
    acak.forEach((a, i) => kelompok[i % jumlahKelompok].push(a));

    if (!wajibPerempuan || kelompok.every(k => k.some(a => a.jeniskelamin === "perempuan"))) {
      berhasil = true;
      break;
    }
    percobaan++;
  }

  if (!berhasil) {
    out.innerHTML = `<div class="alert alert-danger">Tidak dapat membentuk kelompok dengan minimal 1 perempuan per kelompok setelah ${maksPercobaan} percobaan. Coba kurangi jumlah kelompok atau tambah jumlah perempuan.</div>`;
    return;
  }

  kelompokTerbentuk = kelompok; 

  let html = "";
  kelompok.forEach((k, i) => {
    html += `<h5 class="mt-4">Kelompok ${i + 1}</h5><ul class="list-group">` + k.map(a => `<li class="list-group-item">${a.nama}</li>`).join("") + "</ul>";
  });
  out.innerHTML = html;
}

    function exportKelompok() {
      if (!kelompokTerbentuk.length) return;
      let text = "Data Kelompok:\n\n";
      kelompokTerbentuk.forEach((group, i) => {
        text += `Kelompok ${i + 1}:\n` + group.map(a => `- ${a.nama}`).join("\n") + "\n\n";
      });
      const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
      saveAs(blob, "kelompok.txt");
    }

function loginAdmin() {
  const user = document.getElementById("user").value.trim();
  const pass = document.getElementById("pass").value.trim();
  if (akun[user] && akun[user].password === pass) {
    currentRole = akun[user].role;
    localStorage.setItem("role", currentRole);
    document.getElementById("login-msg").textContent = `Login berhasil sebagai ${user} (Role: ${currentRole})`;
    tampilkanKeuangan();
    
    if (currentRole === "admin") {
      document.getElementById("admin-panel").classList.remove("d-none");
    }
  } else {
    document.getElementById("login-msg").textContent = "Login gagal.";
  }
}
currentRole = localStorage.getItem("role");

    function navHandler() {
      const sections = document.querySelectorAll("main section");
      document.querySelectorAll(".sidebar a").forEach(link => {
        link.addEventListener("click", e => {
          e.preventDefault();
          const target = link.getAttribute("href").replace("#", "");
          sections.forEach(sec => sec.classList.add("d-none"));
          const el = document.getElementById(target);
          el.classList.remove("d-none");
          el.classList.remove('fade-in');
          void el.offsetWidth;
          el.classList.add('fade-in');
          closeSidebar();
if (currentRole === "admin") {
  document.getElementById("admin-panel").classList.remove("d-none");
}          
        });
      });
    }

function updateClock() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');
    
    const clockDisplay = document.getElementById('clock');
    clockDisplay.textContent = `${hours}:${minutes}:${seconds}`;
}

// Update the clock every second
setInterval(updateClock, 1000);

// Initial update
updateClock();             

    tampilkanAnggota();
    tampilkanKeuangan();
    navHandler();
  </script></body></html>